<div class="dashboard-container">
  <!-- Header -->
  <header class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">
        <span class="icon">ğŸ“Š</span>
        Dashboard
      </h1>
      <div class="header-actions">
        <button class="btn-nav" (click)="irAInicio()" title="Ir a Inicio">
          <span class="icon">ğŸ </span>
          Inicio
        </button>
        <button class="btn-nav" (click)="irAPerfil()" title="Ver Perfil">
          <span class="icon">ğŸ‘¤</span>
          Perfil
        </button>
        <button
          class="btn-nav"
          (click)="exportarPdf()"
          [disabled]="loading || exportingPdf"
          title="Exportar resumen a PDF"
        >
          <span class="icon">ğŸ“„</span>
          {{ exportingPdf ? 'Generando...' : 'Exportar PDF' }}
        </button>
        <button class="btn-refresh" (click)="recargarDashboard()" [disabled]="loading" title="Recargar grÃ¡ficos">
          <span class="refresh-icon">ğŸ”„</span>
          Recargar
        </button>
        <div class="user-info">
          <span class="user-role">{{ isProgramador ? 'ğŸ‘¨â€ğŸ’» Programador' : 'ğŸ‘¤ Usuario' }}</span>
          <span class="user-name">{{ currentUser?.displayName || currentUser?.email }}</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Cargando dashboard...</p>
  </div>

  <!-- Content -->
  <div *ngIf="!loading" class="dashboard-content" id="dashboardExport">
    <div class="dashboard-summary-header">
      <div class="summary-title">Resumen del Dashboard</div>
      <div class="summary-user">
        {{ currentUser?.displayName || currentUser?.email || 'Usuario' }}
      </div>
      <div class="summary-date">{{ currentDate | date: 'longDate' }}</div>
    </div>
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card stat-total">
        <div class="stat-icon">ğŸ“‹</div>
        <div class="stat-info">
          <span class="stat-value">{{ estadisticas?.totalAsesorias || 0 }}</span>
          <span class="stat-label">Total AsesorÃ­as</span>
        </div>
      </div>

      <div class="stat-card stat-pending">
        <div class="stat-icon">â³</div>
        <div class="stat-info">
          <span class="stat-value">{{ estadisticas?.pendientes || 0 }}</span>
          <span class="stat-label">Pendientes</span>
        </div>
      </div>

      <div class="stat-card stat-approved">
        <div class="stat-icon">âœ…</div>
        <div class="stat-info">
          <span class="stat-value">{{ estadisticas?.aprobadas || 0 }}</span>
          <span class="stat-label">Aprobadas</span>
        </div>
      </div>

      <div class="stat-card stat-rejected">
        <div class="stat-icon">âŒ</div>
        <div class="stat-info">
          <span class="stat-value">{{ estadisticas?.rechazadas || 0 }}</span>
          <span class="stat-label">Rechazadas</span>
        </div>
      </div>
    </div>

    <!-- Charts Grid -->
    <div class="charts-grid" *ngIf="asesorias.length > 0">
      <!-- Chart Estado -->
      <div class="chart-card">
        <h3 class="chart-title">Estado de AsesorÃ­as</h3>
        <div class="chart-container">
          <canvas id="chartEstado"></canvas>
        </div>
      </div>

      <!-- Chart Programador (solo usuarios) -->
      <div class="chart-card" *ngIf="isUsuario">
        <h3 class="chart-title">Por Programador</h3>
        <div class="chart-container">
          <canvas id="chartProgramador"></canvas>
        </div>
      </div>

      <!-- Chart Tendencia -->
      <div class="chart-card chart-wide">
        <h3 class="chart-title">Tendencia Mensual</h3>
        <div class="chart-container">
          <canvas id="chartTendencia"></canvas>
        </div>
      </div>

      <!-- Chart Temas -->
      <div class="chart-card">
        <h3 class="chart-title">Temas MÃ¡s Solicitados</h3>
        <div class="chart-container">
          <canvas id="chartTemas"></canvas>
        </div>
      </div>
    </div>

    <!-- No Data Message -->
    <div *ngIf="asesorias.length === 0" class="no-data">
      <div class="no-data-icon">ğŸ“­</div>
      <h3>No hay asesorÃ­as registradas</h3>
      <p>{{ isProgramador ? 'AÃºn no tienes asesorÃ­as asignadas' : 'Solicita tu primera asesorÃ­a' }}</p>
      <button class="btn-primary" *ngIf="!isProgramador" (click)="router.navigate(['/asesorias'])">
        Solicitar AsesorÃ­a
      </button>
    </div>
  </div>
</div>